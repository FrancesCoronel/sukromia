function encrypt(e,t,n){return CryptoJS[e].encrypt(t,n).toString()}function decrypt(e,t,n){return CryptoJS[e].decrypt(t,n).toString(CryptoJS.enc.Utf8)}function launchPopup(e){chrome.windows.getCurrent(function(){var t=screen.width-350,n=screen.height/2-220;chrome.windows.create({url:chrome.extension.getURL("./popup.html"),type:"popup",top:n,left:t,width:429,height:400},e)})}function menuItemClicked(e){launchPopup(function(t){setTimeout(function(){chrome.tabs.sendMessage(t.tabs[0].id,{type:"selectionText",text:e.selectionText||e.linkUrl})},200)})}chrome.runtime.onMessage.addListener(function(e,t,n){"encrypt"==e.type?n(encrypt(e.cipher,e.text,e.passphrase)):"decrypt"==e.type?n(decrypt(e.cipher,e.text,e.passphrase)):"launchPopup"==e.type&&launchPopup()}),chrome.contextMenus.create({title:"Encrypt/Decrypt with Sukromia",contexts:["selection","link","editable"],onclick:menuItemClicked}),chrome.browserAction.onClicked.addListener(function(){launchPopup()});